<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"zhenghe-md.github.io","root":"/blog/","images":"/blog/images","scheme":"Mist","darkmode":false,"version":"8.9.0","exturl":false,"sidebar":{"position":"left","display":"remove","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"}}</script><script src="/blog/js/config.js"></script>
<meta name="description" content="é€ ä¸€è¾†èƒ½è·‘åœ¨è·¯ä¸Šçš„è½¦å¹¶ééš¾äº‹ï¼Œä½†è¦è¿™è¾†è½¦èƒ½åœ¨å„ç§è·¯å†µã€æ°”å€™å’Œçªå‘äº‹ä»¶ä¸‹å®‰å…¨è¡Œé©¶ï¼Œäº‹æƒ…å°±ä¸å†ç®€å•ã€‚å¦‚æœæŠŠå†™ç¨‹åºæ¯”å–»æˆé€ è½¦ï¼Œæ„å»ºç¨‹åºçš„ä¸»è¦åŠŸèƒ½å°±æ˜¯è®©è½¦è·‘èµ·æ¥ï¼Œè€Œå¤„ç†å¥½é”™è¯¯å°±æ˜¯è®©è½¦å®‰å…¨åœ°è·‘ã€‚é”™è¯¯æ˜¯ç¨‹åºçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œèƒ½å¦åœ¨ç¨‹åºä¸­å¤„ç†å¥½é”™è¯¯å†³å®šäº†è½¯ä»¶çš„è´¨é‡ä¸Šé™ã€‚åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘å°†ä»‹ç»ä¸ªäººåœ¨ Golang é¡¹ç›®ä¸­é”™è¯¯å¤„ç†çš„æ€è€ƒã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="å¦‚ä½•åœ¨ Golang é¡¹ç›®ä¸­å¤„ç†å¥½é”™è¯¯">
<meta property="og:url" content="https://zhenghe-md.github.io/blog/2020/10/05/Go-Error-Handling-Research/index.html">
<meta property="og:site_name" content="ZhengHe">
<meta property="og:description" content="é€ ä¸€è¾†èƒ½è·‘åœ¨è·¯ä¸Šçš„è½¦å¹¶ééš¾äº‹ï¼Œä½†è¦è¿™è¾†è½¦èƒ½åœ¨å„ç§è·¯å†µã€æ°”å€™å’Œçªå‘äº‹ä»¶ä¸‹å®‰å…¨è¡Œé©¶ï¼Œäº‹æƒ…å°±ä¸å†ç®€å•ã€‚å¦‚æœæŠŠå†™ç¨‹åºæ¯”å–»æˆé€ è½¦ï¼Œæ„å»ºç¨‹åºçš„ä¸»è¦åŠŸèƒ½å°±æ˜¯è®©è½¦è·‘èµ·æ¥ï¼Œè€Œå¤„ç†å¥½é”™è¯¯å°±æ˜¯è®©è½¦å®‰å…¨åœ°è·‘ã€‚é”™è¯¯æ˜¯ç¨‹åºçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œèƒ½å¦åœ¨ç¨‹åºä¸­å¤„ç†å¥½é”™è¯¯å†³å®šäº†è½¯ä»¶çš„è´¨é‡ä¸Šé™ã€‚åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘å°†ä»‹ç»ä¸ªäººåœ¨ Golang é¡¹ç›®ä¸­é”™è¯¯å¤„ç†çš„æ€è€ƒã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-10-05T16:20:00.000Z">
<meta property="article:modified_time" content="2024-10-10T14:53:27.098Z">
<meta property="article:author" content="ZhengHe">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://zhenghe-md.github.io/blog/2020/10/05/Go-Error-Handling-Research/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://zhenghe-md.github.io/blog/2020/10/05/Go-Error-Handling-Research/","path":"2020/10/05/Go-Error-Handling-Research/","title":"å¦‚ä½•åœ¨ Golang é¡¹ç›®ä¸­å¤„ç†å¥½é”™è¯¯"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>å¦‚ä½•åœ¨ Golang é¡¹ç›®ä¸­å¤„ç†å¥½é”™è¯¯ | ZhengHe</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-172943223-1"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-172943223-1","only_pageview":false}</script>
  <script src="/blog/js/third-party/analytics/google-analytics.js"></script>





  <noscript>
    <link rel="stylesheet" href="/blog/css/noscript.css">
  </noscript>
<style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container {
  overflow: auto hidden;
}

mjx-container + br {
  display: none;
}
</style><link rel="alternate" href="/blog/atom.xml" title="ZhengHe" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">ZhengHe</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li>
        <li class="menu-item menu-item-categories"><a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li>
        <li class="menu-item menu-item-archives"><a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
        <li class="menu-item menu-item-about"><a href="/blog/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/ZhengHe-MD" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zhenghe-md.github.io/blog/2020/10/05/Go-Error-Handling-Research/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="ZhengHe">
      <meta itemprop="description" content="éƒ‘é¹¤çš„åšå®¢">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhengHe">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          å¦‚ä½•åœ¨ Golang é¡¹ç›®ä¸­å¤„ç†å¥½é”™è¯¯
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2020-10-05 16:20:00" itemprop="dateCreated datePublished" datetime="2020-10-05T16:20:00+00:00">2020-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-10-10 14:53:27" itemprop="dateModified" datetime="2024-10-10T14:53:27+00:00">2024-10-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">ç¼–ç¨‹</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/blog/2020/10/05/Go-Error-Handling-Research/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/10/05/Go-Error-Handling-Research/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>é€ ä¸€è¾†èƒ½è·‘åœ¨è·¯ä¸Šçš„è½¦å¹¶ééš¾äº‹ï¼Œä½†è¦è¿™è¾†è½¦èƒ½åœ¨å„ç§è·¯å†µã€æ°”å€™å’Œçªå‘äº‹ä»¶ä¸‹å®‰å…¨è¡Œé©¶ï¼Œäº‹æƒ…å°±ä¸å†ç®€å•ã€‚å¦‚æœæŠŠå†™ç¨‹åºæ¯”å–»æˆé€ è½¦ï¼Œæ„å»ºç¨‹åºçš„ä¸»è¦åŠŸèƒ½å°±æ˜¯è®©è½¦è·‘èµ·æ¥ï¼Œè€Œå¤„ç†å¥½é”™è¯¯å°±æ˜¯è®©è½¦å®‰å…¨åœ°è·‘ã€‚<strong>é”™è¯¯æ˜¯ç¨‹åºçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œèƒ½å¦åœ¨ç¨‹åºä¸­å¤„ç†å¥½é”™è¯¯å†³å®šäº†è½¯ä»¶çš„è´¨é‡ä¸Šé™</strong>ã€‚åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘å°†ä»‹ç»ä¸ªäººåœ¨ Golang é¡¹ç›®ä¸­é”™è¯¯å¤„ç†çš„æ€è€ƒã€‚</p>
<span id="more"></span>
<h1 id="è°åœ¨æ¶ˆè´¹é”™è¯¯">è°åœ¨æ¶ˆè´¹é”™è¯¯</h1>
<blockquote>
<p>The tricky part about errors is that they need to be different things to different consumers of themã€‚ --- Ben Johnson</p>
</blockquote>
<p>è¦å¦¥å–„åœ°å¤„ç†å¥½ç¨‹åºä¸­çš„é”™è¯¯ï¼Œé¦–å…ˆåº”æƒ³æ¸…æ¥šè¿™äº›é”™è¯¯çš„æ¶ˆè´¹è€…æ˜¯è°ã€‚boltdb çš„ä½œè€… Ben Johnson åœ¨<a target="_blank" rel="noopener" href="https://middlemost.com/failure-is-your-domain/">è¿™ç¯‡åšå®¢</a>é‡Œæ€»ç»“äº†ä»–çš„æ€è€ƒï¼š<strong>æœ‰ä¸‰ç§è§’è‰²åœ¨æ¶ˆè´¹é”™è¯¯ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ç”¨æˆ· (end user)ã€ç¨‹åº (application) å’Œè¿ç»´ (operator)</strong>ã€‚</p>
<h2 id="æ¶ˆè´¹è€…-1ç”¨æˆ·">æ¶ˆè´¹è€… 1ï¼šç”¨æˆ·</h2>
<p>å½“æœåŠ¡é‡åˆ°é”™è¯¯ï¼Œæ— æ³•å®Œæˆç”¨æˆ·çš„è¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰ç”¨æˆ·ã€Œæ˜¯ä»€ä¹ˆã€å’Œã€Œæ€ä¹ˆåšã€ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æ‚¨çš„æƒé™ä¸è¶³ï¼Œè¯·è”ç³» xxx å¼€å¯</li>
<li>ç³»ç»Ÿä¸´æ—¶æ•…éšœï¼Œè¯·ç¨åé‡è¯•</li>
</ul>
<p>è¿™é‡Œçš„ã€Œæ˜¯ä»€ä¹ˆã€å¹¶éè¶Šå…·ä½“è¶Šå¥½ï¼Œä¸€èˆ¬å‘Šè¯‰ç”¨æˆ·é”™è¯¯çš„å¤§ç±»å³å¯ï¼šæ˜¯å‚æ•°é”™è¯¯ã€è¿˜æ˜¯æƒé™é—®é¢˜ã€äº¦æˆ–æ˜¯æœåŠ¡ç«¯è¶…è½½ã€‚è®¸å¤šå·¥ç¨‹å¸ˆä¼šæœ¬èƒ½åœ°æŠŠåŸæœ¬åº”è¯¥æ‰“å°åœ¨æ—¥å¿—é‡Œçš„ä¿¡æ¯å‘Šè¯‰ç”¨æˆ·ï¼Œè¿™ä¹ˆåšèƒŒåéšè—ç€æœ‰ä¸¤ä¸ªç›®çš„ï¼š</p>
<ul>
<li>å¦‚æœç”¨æˆ·æœ‰æŠ€æœ¯èƒŒæ™¯çŸ¥è¯†è¶³å¤Ÿï¼Œèƒ½ç†è§£æ ¹å› </li>
<li>ç”¨æˆ·åé¦ˆæ—¶ä¼šæŠŠé”™è¯¯ä¿¡æ¯å¸¦ä¸Šï¼Œèƒ½åŠ é€Ÿå®šä½</li>
</ul>
<p>ä½†ä»”ç»†ä¸€æƒ³ï¼Œè¿™äº›ç›®çš„ç»ä¸èµ·æ¨æ•²ã€‚é¦–å…ˆï¼Œç”¨æˆ·æ ¹æœ¬ä¸å…³å¿ƒèƒŒåçš„ç»†èŠ‚å’Œå®ç°ï¼Œå³ä¾¿è¿™äº›ç”¨æˆ·æ˜¯è½¯ä»¶å·¥ç¨‹å¸ˆè¿™ä¸ªæ–­è¨€ä¹Ÿæ²¡é—®é¢˜ï¼›å…¶æ¬¡ï¼Œæš´éœ²è¿‡å¤šçš„ä¿¡æ¯å¯èƒ½ç»™æ¶æ„æ”»å‡»è€…ç•™ä¸‹çº¿ç´¢ï¼Œé™ä½ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼›æœ€åï¼Œé—®é¢˜å®šä½æ˜¯ä½é¢‘åœºæ™¯ï¼Œé€šè¿‡æ—¥å¿—æŸ¥è¯¢è¯¦ç»†çš„ä¿¡æ¯å³ä¾¿é€Ÿåº¦æ…¢ä¸€äº›ï¼Œä½†å¹¶éæ— æ³•æ¥å—ã€‚</p>
<h2 id="æ¶ˆè´¹è€…-2ç¨‹åº">æ¶ˆè´¹è€… 2ï¼šç¨‹åº</h2>
<p>è®¸å¤šæ—¶å€™ï¼Œç¨‹åºéœ€è¦æ ¹æ®é”™è¯¯çš„ç±»å‹æ¥ç²¾ç»†åœ°æ§åˆ¶é€»è¾‘ã€‚æ¯”å¦‚ï¼Œå½“ X æœåŠ¡å‘é€è¯·æ±‚ç»™ Y æœåŠ¡ï¼ŒY æœåŠ¡æ— æ³•æ»¡è¶³è¯¥è¯·æ±‚ï¼Œä¾¿è¿”å›é”™è¯¯ã€‚æ­¤æ—¶ï¼ŒX æœåŠ¡æ˜¯å¦åº”è¯¥é‡è¯•ï¼Ÿè¿™å–å†³äºè¿”å›çš„é”™è¯¯æ˜¯ä¸´æ—¶æ€§çš„è¿˜æ˜¯ä¸å¯æ¢å¤çš„ï¼›å½“ X æœåŠ¡çš„ DAL (Data Access Layer) å‘é€è¯·æ±‚åˆ°æ•°æ®åº“ï¼Œåè€…è¿”å›é”™è¯¯æ—¶ï¼ŒX æœåŠ¡åº”è¯¥ç»™ç”¨æˆ·è¿”å›ä»€ä¹ˆä¿¡æ¯ï¼Ÿè¿™å–å†³äºæ•°æ®åº“è¿”å›çš„é”™è¯¯æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæ˜¯æ•°æ®æ‰¾ä¸åˆ°ï¼Ÿè¿˜æ˜¯æ•°æ®åº“è¡¨æ»¡äº†ï¼Ÿè¿˜æ˜¯åˆ«çš„åŸå› ï¼Ÿ</p>
<p>è¿™é”™è¯¯çš„ç±»å‹å®šä¹‰æ–¹é¢ï¼Œä¸šç•Œå·²ç»æœ‰è®¸å¤šæˆå‹çš„å®è·µï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">HTTP</a>ï¼š400ã€401ã€403ã€404ã€429ã€500ã€502ã€503...</li>
<li><a target="_blank" rel="noopener" href="https://grpc.github.io/grpc/core/md_doc_statuscodes.html">gRPC</a>ï¼šINVALID_ARGUMENT, DEADLINE_EXCEEDED, NOT_FOUND, ALREADY_EXISTS, ...</li>
<li><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/mysql-errors/8.0/en/server-error-reference.html">MySQL</a>ï¼š1040ã€1045ã€1046ã€1064ã€1114...</li>
</ul>
<p>å®ƒä»¬éƒ½ç»è¿‡äº†æ— æ•°é¡¹ç›®çš„è€ƒéªŒï¼Œéå¿…è¦ä¸é‡å¤é€ è½®å­ã€‚</p>
<h2 id="æ¶ˆè´¹è€…-3è¿ç»´">æ¶ˆè´¹è€… 3ï¼šè¿ç»´</h2>
<p>ç”¨æˆ·é‡åˆ°æ— æ³•è§£å†³çš„é—®é¢˜æ—¶ï¼Œæœ€ç»ˆä¼šæ¥åˆ°è¿ç»´çš„æ‰‹ä¸Šã€‚æœåŠ¡æ—¥å¿—æ˜¯è¿ç»´å®šä½é—®é¢˜çš„åˆ©å™¨ã€‚å°†é”™è¯¯åŠé”™è¯¯å‘ç”Ÿçš„èƒŒæ™¯ä¿¡æ¯æ‰“å°åˆ°æ—¥å¿—é‡Œï¼Œå°†æå¤§åœ°æ–¹ä¾¿æ•…éšœæ’æŸ¥ã€‚è¦æƒ³å®šä½å¿«ï¼Œç»†èŠ‚å°±è¦è¶Šä¸°å¯Œï¼Œè¿™äº›ç»†èŠ‚å¯èƒ½åŒ…æ‹¬é”™è¯¯å‘ç”Ÿæ—¶çš„ï¼š</p>
<ul>
<li>ä¸€å¥è¯æè¿°</li>
<li>å‡½æ•°è°ƒç”¨æ ˆ</li>
<li>è¯·æ±‚ä¸Šä¸‹æ–‡ (request_idã€user_idã€device_id)</li>
</ul>
<p>å…¶ä¸­ã€Œä¸€å¥è¯æè¿°ã€ä¸ã€Œå‡½æ•°è°ƒç”¨æ ˆã€å°±å¯èƒ½æ¥è‡ªäºé”™è¯¯ã€‚</p>
<h1 id="errors-are-values">"Errors are values"</h1>
<blockquote>
<p>Values can be programmed, and since errors are values, errors can be programmed...The key lesson, however, is that errors are values and the full power of the Go programming language is available for processing them. --- Rob Pike</p>
</blockquote>
<p>2015 å¹´ 1 æœˆï¼Œ<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Rob_Pike">Rob Pike</a> åœ¨ The Go Blog ä¸Šå‘è¡¨äº†é¢˜ä¸º "Errors are values" çš„<a target="_blank" rel="noopener" href="https://go.dev/blog/errors-are-values">æ–‡ç« </a>ï¼Œå¹¶åœ¨å½“å¹´çš„ Gopherfest <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=PAAkCSZUG1c&amp;t=973s">æ¼”è®²</a> "Go Proverbs" ä¸­å°†è¿™å¥è¯åˆ—åœ¨ 19 ä¸ª proverbs ä¹‹ä¸­ã€‚å®ƒæ˜¯æ¯ä½ Golang å·¥ç¨‹å¸ˆåº”è¯¥é“­è®°çš„ä¸€å¥è¯ã€‚</p>
<h2 id="é”™è¯¯åªæ˜¯ä¸€ä¸ªæ™®é€šå€¼">é”™è¯¯åªæ˜¯ä¸€ä¸ªæ™®é€šå€¼</h2>
<h3 id="the-error-interface">The error interface</h3>
<p>åœ¨ Golang ä¸­ï¼Œä»»æ„å®ç°äº† error interface çš„æ•°æ®ç±»å‹éƒ½è¢«è®¤ä¸ºæ˜¯é”™è¯¯ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> error <span class="keyword">interface</span> &#123;</span><br><span class="line">	Error() <span class="keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®ƒç”šè‡³å¯ä»¥åªæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> err <span class="keyword">string</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e err)</span> <span class="title">Error</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> e</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ğŸ’â€â™‚ï¸ Golang ä¸­æ²¡æœ‰ implement å…³é”®è¯ï¼Œåªè¦å®ç°äº† interfaceï¼Œå°±ç­‰ä»·äº implementã€‚</p>
</blockquote>
<h3 id="ä½œä¸ºè¿”å›å€¼">ä½œä¸ºè¿”å›å€¼</h3>
<p>æ—¢ç„¶é”™è¯¯åªæ˜¯ä¸€ä¸ªæ™®é€šå€¼ï¼Œè¿™ä¸ªå€¼å°±å¯ä»¥è¢«ä½œä¸ºå‡½æ•°çš„å…¥å‚å’Œå‡ºå‚ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆ error çº¦å®šä¿—æˆåœ°ä¼šä½œä¸ºæœ€åä¸€ä¸ªè¿”å›å€¼ï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// example 1:</span></span><br><span class="line">res, err := http.Get(<span class="string">&quot;http://localhost:8080&quot;</span>)</span><br><span class="line"><span class="comment">// example 2:</span></span><br><span class="line"><span class="keyword">if</span> u, err := url.Parse(<span class="string">&quot;invalid-url&quot;</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">	<span class="comment">// handle sad path</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	<span class="comment">// handle happy path</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸ä½¿ç”¨-exception-çš„åŒºåˆ«">ä¸ä½¿ç”¨ Exception çš„åŒºåˆ«</h2>
<p>åœ¨è®¸å¤šå½“ä¸‹æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼ŒåŸºäº Exception çš„é”™è¯¯å¤„ç†å ä¸»æµåœ°ä½ï¼Œæ¯”å¦‚ C++ã€Java å’Œ Pythonã€‚å¯¹äºä»è¿™äº›è¯­è¨€è½¬åˆ° Golang çš„å·¥ç¨‹å¸ˆè€Œè¨€ï¼Œ"errors are values" çš„è§‚ç‚¹ç›¸å½“æ¿€è¿›ï¼Œéš¾ä»¥é€‚åº”ã€‚Stackoverflow çš„å‰ CEO Joel Spolsky åœ¨ 2003 å¹´å‘è¡¨è¿‡ä¸€ç¯‡<a target="_blank" rel="noopener" href="https://www.joelonsoftware.com/2003/10/13/13/">åšå®¢</a>ï¼Œåœ¨å…¶ä¸­ä»–è®¨è®ºäº†ç”¨ Exceptions å¤„ç†é”™è¯¯å¸¦æ¥çš„é—®é¢˜ï¼š</p>
<blockquote>
<p>I consider exceptions to be no better than "goto's", <a target="_blank" rel="noopener" href="http://www.acm.org/classics/oct95/">considered harmful</a> since the 1960s, in that they create an abrupt jump from one point of code to another. --- Joel Spolsky</p>
</blockquote>
<p>Joel è®¤ä¸ºæ›´å¥½çš„æ–¹å¼æ˜¯å°†é”™è¯¯å½“ä½œæ™®é€šçš„è¿”å›å€¼ï¼Œè€Œç¨‹åºåº”è¯¥åœ¨æ‹¿åˆ°è¿”å›å€¼æ—¶ç«‹å³å¤„ç†å®ƒï¼Œå°½ç®¡è¿™ä¼šè®©ç¨‹åºå˜å¾—æ›´å•°å—¦ï¼Œä½†å•°å—¦æ€»æ¯”ç‰ºç‰²è½¯ä»¶çš„è´¨é‡å¥½ä¸€äº›ã€‚</p>
<blockquote>
<p>ğŸ’â€â™‚ï¸ æœ¬èŠ‚å¹¶éæƒ³è¯´æ˜è¯­è¨€è®¾è®¡çš„ä¼˜åŠ£ï¼Œåªæ˜¯æƒ³ä»‹ç»ä¸€ä¸‹ Golang çš„é”™è¯¯å¤„ç†è®¾è®¡ç†å¿µçš„ç”±æ¥ã€‚</p>
</blockquote>
<h2 id="è‹¥å¹²-error-interface-çš„å®ç°">è‹¥å¹² error interface çš„å®ç°</h2>
<p>æ—¢ç„¶ "errors are values"ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨ Golang èµ‹äºˆçš„æ‰€æœ‰é€»è¾‘è¡¨è¾¾èƒ½åŠ›å¤„ç†é”™è¯¯ï¼Œä¸ºä¸åŒé¡¹ç›®ã€åœºæ™¯å®šåˆ¶åŒ–è®¾è®¡ã€‚æ— è®ºæ˜¯æ ‡å‡†åº“è¿˜æ˜¯ç¤¾åŒºä¸­éƒ½æœ‰è®¸å¤šç›¸å…³å®è·µï¼Œè¿™é‡Œåˆ†åˆ«ä¸¾å‡ ä¸ªä¾‹å­ï¼š</p>
<h3 id="æ ‡å‡†åº“">æ ‡å‡†åº“</h3>
<p><strong>1. errorString</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/errors/errors.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">New</span><span class="params">(text <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;errorString&#123;text&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> errorString <span class="keyword">struct</span> &#123;</span><br><span class="line">	s <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *errorString)</span> <span class="title">Error</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> e.s</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨ <code>errors.New</code> åˆ›å»ºçš„é”™è¯¯å®é™…ä¸Šå°±æ˜¯è¿™é‡Œçš„ <code>errorString</code>ã€‚</p>
<p><strong>2. joinError</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/errors/join.go</span></span><br><span class="line"><span class="keyword">type</span> joinError <span class="keyword">struct</span> &#123;</span><br><span class="line">	errs []error</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *joinError)</span> <span class="title">Error</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> b []<span class="keyword">byte</span></span><br><span class="line">	<span class="keyword">for</span> i, err := <span class="keyword">range</span> e.errs &#123;</span><br><span class="line">		<span class="keyword">if</span> i &gt; <span class="number">0</span> &#123;</span><br><span class="line">			b = <span class="built_in">append</span>(b, <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">		b = <span class="built_in">append</span>(b, err.Error()...)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">string</span>(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€äº›åœºæ™¯é‡Œï¼Œæˆ‘ä»¬å¸Œæœ›åˆå¹¶å¤šä¸ªé”™è¯¯ï¼ŒåŒæ—¶ä¿ç•™è¿™äº›é”™è¯¯çš„åŸå§‹ä¿¡æ¯ï¼Œè¿™æ—¶å¯ä»¥ç”¨ <code>errors.Join</code>ï¼Œåè€…å°±ä¼šåˆ›å»ºä¸€ä¸ª <code>joinError</code>ã€‚</p>
<p><strong>3. os.PathError</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/io/fs/fs.go</span></span><br><span class="line"><span class="comment">// PathError records an error and the operation and file path that caused it.</span></span><br><span class="line"><span class="keyword">type</span> PathError <span class="keyword">struct</span> &#123;</span><br><span class="line">	Op   <span class="keyword">string</span></span><br><span class="line">	Path <span class="keyword">string</span></span><br><span class="line">	Err  error</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *PathError)</span> <span class="title">Error</span><span class="params">()</span> <span class="title">string</span></span> &#123; <span class="keyword">return</span> e.Op + <span class="string">&quot; &quot;</span> + e.Path + <span class="string">&quot;: &quot;</span> + e.Err.Error() &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *PathError)</span> <span class="title">Unwrap</span><span class="params">()</span> <span class="title">error</span></span> &#123; <span class="keyword">return</span> e.Err &#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ‰§è¡Œæ–‡ä»¶æ“ä½œé‡åˆ°é”™è¯¯æ—¶ï¼Œé™¤äº†è®°å½•é”™è¯¯æœ¬èº«ï¼Œä¿ç•™æ“ä½œç±»å‹ã€æ–‡ä»¶è·¯å¾„ä¿¡æ¯èƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¿«åœ°å®šä½é—®é¢˜ï¼Œè¿™é‡Œçš„ <code>PathError</code> å°±å¹²äº†è¿™ä¹ˆä¸€ä»¶äº‹ã€‚</p>
<h3 id="ç¤¾åŒº">ç¤¾åŒº</h3>
<p>è®¸å¤šå›¢é˜Ÿä¸ºäº†æ–¹ä¾¿åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å¤„ç†é”™è¯¯ï¼Œå®šåˆ¶åŒ–å¼€å‘äº†è®¸å¤š Golang packagesï¼Œç„¶åå¼€æºå‡ºæ¥é€ ç¦ç¤¾åŒºã€‚ä»¥ä¸‹åˆ—ä¸¾ä¸€äº›é¡¹ç›®ä¾›è¯»è€…è¿›ä¸€æ­¥äº†è§£ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/uber-go/multierr">GitHub - uber-go/multierr</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/juju/errors">GitHub - juju/errors</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/go-errors/errors">GitHub - go-errors/errors</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/cockroachdb/errors">GitHub - cockroachdb/errors</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/pkg/errors">GitHub - pkg/errors</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/pingcap/errors">GitHub - pingcap/errors</a></li>
</ul>
<h1 id="æ ‡å‡†åº“çš„æ¼”è¿›">æ ‡å‡†åº“çš„æ¼”è¿›</h1>
<p>Golang å¯¹äºè¯­æ³•å’ŒåŠŸèƒ½çš„æ·»åŠ ååˆ†å…‹åˆ¶ï¼Œå› æ­¤ errors æ ‡å‡†åº“è¿­ä»£ä¹‹è·¯å¯è°“æ˜¯å°å¿ƒç¿¼ç¿¼ã€‚</p>
<h2 id="ç‚¹">&lt;1.13: ç‚¹</h2>
<p>åœ¨ Go1.13 ä¹‹å‰ï¼Œæ¯ä¸ªé”™è¯¯éƒ½æ˜¯ä¸€ä¸ªã€Œç‚¹ã€ï¼Œé”™è¯¯ä¹‹é—´æ— æ³•å»ºç«‹è”ç³»ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ <code>errors.New</code> å’Œ <code>fmt.Errorf</code> è¿™ä¸¤ç§æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„é”™è¯¯ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create an error</span></span><br><span class="line"><span class="keyword">var</span> RecordNotFoundErr = errors.New(<span class="string">&quot;DB: record not found&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> UserNotFoundErr = fmt.Errorf(<span class="string">&quot;user not found: %v&quot;</span>, RecordNotFoundErr)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¦åœ¨ç¨‹åºä¸­æ¶ˆè´¹å®ƒï¼Œå¯ä»¥é€šè¿‡æ£€æŸ¥å€¼æˆ–ç±»å‹æ˜¯å¦ç›¸ç­‰æ¥æ§åˆ¶ç¨‹åºé€»è¾‘ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// check identity</span></span><br><span class="line"><span class="keyword">if</span> err == RecordNotFoundErr &#123;</span><br><span class="line">	<span class="comment">// case 1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	<span class="comment">// case 2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// check type</span></span><br><span class="line"><span class="keyword">if</span> nerr, ok := err.(net.Error) &#123;</span><br><span class="line">	<span class="comment">// case 1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	<span class="comment">// case 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶æœ‰ä¸€ä¸ªå¸¸è§çš„é—®é¢˜ï¼šå½“æˆ‘ä»¬æƒ³ç»™é”™è¯¯è¡¥å……ä¸€äº›ä¿¡æ¯æ—¶ï¼Œé”™è¯¯ä¹‹é—´çš„è¡€ç¼˜å…³ç³»ä¼šæ¶ˆå¤±ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> RecordNotFoundErr := errors.New(<span class="string">&quot;DB: record not found&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> UserNotFoundErr = fmt.Errorf(<span class="string">&quot;user not found: %v&quot;</span>, RecordNotFoundErr)</span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‹¿åˆ° <code>UserNotFoundErr</code> æ—¶ï¼Œå®ƒå·²ç»å’Œ <code>RecordNotFoundErr</code> æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œæˆ‘ä»¬æ— æ³•é’ˆå¯¹å®ƒåšä»»ä½•çš„å€¼æˆ–ç±»å‹çš„åˆ¤æ–­ã€‚</p>
<h2 id="é“¾è¡¨">1.13-1.19: é“¾è¡¨</h2>
<p>Go1.13 æ”¯æŒäº†é”™è¯¯çš„åŒ…è£… (wrap)ï¼Œäºæ˜¯é”™è¯¯ä¹‹é—´å¯ä»¥å½¢æˆã€Œé“¾è¡¨ã€ã€‚Golang å®˜æ–¹ä¸ºæ­¤å‘å¸ƒäº†ä¸€ç¯‡<a target="_blank" rel="noopener" href="https://go.dev/blog/go1.13-errors">åšå®¢</a>ï¼Œä»‹ç»ç›¸å…³çš„æœ€ä½³å®è·µã€‚å…·ä½“åœ°è¯´ï¼Œ<code>fmt.Errorf</code> æ–°å¢äº†ä¸€ä¸ªæ ¼å¼æ ‡è®°ã€Œ%wã€ï¼Œå¼€å‘è€…å¯ä»¥ç”¨å®ƒåŒ…è£…é”™è¯¯ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> RecordNotFoundErr = errors.New(<span class="string">&quot;DB: record not found&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> UserNotFoundErr = fmt.Errorf(<span class="string">&quot;user not found: %w&quot;</span>, RecordNotFoundErr)</span><br></pre></td></tr></table></figure>
<p>ä¸ã€Œ%vã€ä¸åŒï¼Œã€Œ%wã€ä¼šåœ¨åˆ›å»ºæ–°é”™è¯¯çš„åŒæ—¶ï¼Œä¿ç•™å¯¹ä¸‹å±‚é”™è¯¯çš„å¼•ç”¨ã€‚è¿™æ—¶å¼€å‘è€…å¯ä»¥é€šè¿‡ errors package æ–°å¢çš„ä¸¤ä¸ªæ–¹æ³•æ¥æ£€æŸ¥é”™è¯¯å€¼æˆ–é”™è¯¯ç±»å‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// check error identity: errors.Is</span></span><br><span class="line"><span class="keyword">if</span> errors.Is(err, RecordNotFoundErr) &#123;&#125;</span><br><span class="line"><span class="comment">// check error type: errors.As</span></span><br><span class="line"><span class="keyword">var</span> nerr *net.Error</span><br><span class="line"><span class="keyword">if</span> errors.As(err, &amp;nerr) &#123;&#125;</span><br></pre></td></tr></table></figure>
<p><code>errors.Is</code> å’Œ <code>errors.As</code> éƒ½ä¼šé€’å½’åœ°éå†æ•´æ¡é”™è¯¯é“¾è¡¨ï¼Œç¡®è®¤é“¾è¡¨ä¸Šæ˜¯å¦å­˜åœ¨ç›¸ç­‰çš„å€¼æˆ–ç±»å‹ã€‚é™¤æ­¤ä»¥å¤–ï¼Œä¸ºäº†å°†è¿™ç§é€’å½’çš„èƒ½åŠ›å¼€æ”¾ï¼ŒGo1.13 è¿˜æä¾›äº† <code>errors.Unwrap</code> æ–¹æ³•ï¼Œæ–¹ä¾¿å¼€å‘è€…è·å–é“¾è¡¨ä¸Šä¸‹ä¸€ä¸ªé”™è¯¯èŠ‚ç‚¹ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> recordNotFoundErr = errors.Unwrap(UserNotFoundErr)</span><br></pre></td></tr></table></figure>
<h2 id="æ ‘">1.20: æ ‘</h2>
<p>Go1.20 åœ¨ Go1.13 çš„åŸºç¡€ä¸Šæ›´è¿›ä¸€æ­¥ï¼Œæ”¯æŒä¸€æ¬¡åŒ…è£…å¤šä¸ªé”™è¯¯ï¼Œäºæ˜¯é”™è¯¯ä¹‹é—´å¯ä»¥å»ºç«‹ã€Œæ ‘ã€çŠ¶å…³ç³»ã€‚åœ¨ä½¿ç”¨å±‚é¢çš„ä½“ç°å°±æ˜¯ <code>fmt.Errorf</code> æ–¹æ³•æ”¯æŒæŒ‡å®šå¤šä¸ªã€Œ%wã€æ ‡è®°ï¼Œå³åŒæ—¶åŒ…è£…å¤šä¸ªé”™è¯¯ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> RecordNotFoundErr = errors.New(<span class="string">&quot;DB: record not found&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> NotFoundErr = errors.New(<span class="string">&quot;NotFound&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> UserNotFoundErr = fmt.Errorf(<span class="string">&quot;user not found: %w (%w)&quot;</span>, RecordNotFoundErr, NotFoundErr)</span><br></pre></td></tr></table></figure>
<p>ç›¸åº”åœ°ï¼Œ <code>errors.Is</code> ä¸ <code>errors.As</code> ä¹Ÿä»å¯¹é“¾è¡¨éå†å‡çº§æˆäº†å¯¹æ ‘çš„éå†ã€‚</p>
<h1 id="ä¸šåŠ¡æœåŠ¡ä¸­çš„é”™è¯¯å¤„ç†å®æˆ˜">ä¸šåŠ¡æœåŠ¡ä¸­çš„é”™è¯¯å¤„ç†å®æˆ˜</h1>
<blockquote>
<p>ğŸ“¢ æœ¬å°èŠ‚ä¸ºä¸ªäººå¼€å‘ç»éªŒæ€»ç»“ï¼Œå­˜åœ¨ä¸€äº›è§‚ç‚¹å€¾å‘ï¼Œè¯·æŒ‰éœ€æ‘„å–ã€‚</p>
</blockquote>
<p>é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¦‚ä½•åˆ©ç”¨ä¸Šè¿°çš„æ€è·¯å’Œå·¥å…·ï¼Œåœ¨ä¸šåŠ¡æœåŠ¡å¼€å‘ä¸­åˆç†åœ°å¤„ç†é”™è¯¯ï¼Ÿæˆ‘å°†è§£å†³æ–¹æ¡ˆæ¦‚æ‹¬æˆäº†å››å¥è¯ï¼š</p>
<ul>
<li>å®šä¹‰é€šç”¨é”™è¯¯</li>
<li>åº•å±‚è½¬æ¢æ ‡è¯†</li>
<li>ä¸­é—´å¡«å……ä¿¡æ¯</li>
<li>ä¸Šå±‚ç»Ÿä¸€åˆ¤æ–­</li>
</ul>
<p>ä¸‹é¢å°±æ¥åˆ†åˆ«è§£é‡Šå®ƒä»¬çš„å«ä¹‰ã€‚</p>
<h2 id="å®šä¹‰é€šç”¨é”™è¯¯">å®šä¹‰é€šç”¨é”™è¯¯</h2>
<p>å¦‚æœä½ è¶³å¤Ÿå¹¸è¿èƒ½åœ¨æ ‡å‡†åŒ–åšå¾—å¾ˆå¼ºçš„å…¬å¸å·¥ä½œï¼Œé‚£ä¹ˆå…¬å¸å†…éƒ¨åº”è¯¥ä¼šæœ‰ä¸€å¥—ç¨³å®šé€šç”¨é”™è¯¯æ ‡å‡†å®šä¹‰ï¼Œæ¯”å¦‚ <a target="_blank" rel="noopener" href="https://cloud.google.com/apis/design/errors">Google Cloud</a>ï¼Œç›´æ¥ä½¿ç”¨è¿™äº›æ ‡å‡†é”™è¯¯æ¥é©±åŠ¨æœåŠ¡å†…éƒ¨çš„é”™è¯¯å¤„ç†å³å¯ï¼Œä½ å¯ä»¥ç›´æ¥è·³è¿‡æ­¤æ­¥éª¤ï¼›å¦‚æœä½ çš„å…¬å¸ä¸æˆ‘å·¥ä½œè¿‡çš„å¤§å¤šæ•°å…¬å¸ä¸€æ ·ï¼Œç¼ºä¹äººäººéµå®ˆçš„å·¥ç¨‹åŒ–æ ‡å‡†ï¼Œå°±éœ€è¦å®šä¹‰æœåŠ¡å†…éƒ¨æˆ–å›¢é˜Ÿå†…éƒ¨çš„é€šç”¨é”™è¯¯ã€‚</p>
<p>å®šä¹‰é€šç”¨é”™è¯¯å¹¶ä¸éš¾ï¼Œä¸€èˆ¬æ ¹æ®éœ€è¦é€‰æ‹© HTTP æˆ– gRPC çš„é”™è¯¯å®šä¹‰å³å¯ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pkg/errors.go</span></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">	NotFound   = errors.New(<span class="string">&quot;NotFound&quot;</span>)</span><br><span class="line">	BadRequest = errors.New(<span class="string">&quot;BadRequest&quot;</span>)</span><br><span class="line">	Internal   = errors.New(<span class="string">&quot;InternalServerError&quot;</span>)</span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„é€šç”¨é”™è¯¯ä¸»è¦æ˜¯æä¾›ç»™ç¨‹åºå’Œè¿ç»´æ¶ˆè´¹ï¼Œå¹¶éé¢å‘ç”¨æˆ·ï¼Œç²’åº¦ä¸å¿…å®šä¹‰åœ°ç‰¹åˆ«ç»†è‡´ã€‚</p>
<h2 id="åº•å±‚è½¬æ¢æ ‡è¯†">åº•å±‚è½¬æ¢æ ‡è¯†</h2>
<p>åœ¨è·¨è¿›ç¨‹è°ƒç”¨å¤„ï¼Œæ— è®ºæ˜¯è®¿é—®æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€é…ç½®ä¸­å¿ƒï¼Œè¿˜æ˜¯è¯·æ±‚ä¸Šæ¸¸çš„å¾®æœåŠ¡ï¼Œä¸€æ—¦å‘ç”Ÿé”™è¯¯å°±ç«‹å³åŒ…è£…æˆå®šä¹‰å¥½çš„é€šç”¨é”™è¯¯ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DAO</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(mud *MySQLUserDAO)</span> <span class="title">GetUser</span><span class="params">(ctx context.Context, id <span class="keyword">int64</span>)</span> <span class="params">(*User, error)</span></span> &#123;</span><br><span class="line">	user, err := mud.getUser(ctx, id)</span><br><span class="line">	<span class="keyword">return</span> user, mud.wrapMySQLError(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(mud *MySQLUserDAO)</span> <span class="title">getUser</span><span class="params">(ctx context.Context, id <span class="keyword">int64</span>)</span> <span class="params">(*User, error)</span></span> &#123;</span><br><span class="line">	<span class="comment">// call mysql driver</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(mud *MySQLUserDAO)</span> <span class="title">wrapMySQLError</span><span class="params">(err error)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">switch</span> err &#123;</span><br><span class="line">		<span class="keyword">case</span> MySQLAccessDenied:</span><br><span class="line">			<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;MySQL access denied: %w&quot;</span>, PermissionDenied)</span><br><span class="line">		<span class="comment">// ... other cases</span></span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">		<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;MySQL error: %w&quot;</span>, Internal)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸­é—´å¡«å……ä¿¡æ¯">ä¸­é—´å¡«å……ä¿¡æ¯</h2>
<p>åœ¨ä¸Šå±‚ä¸åº•å±‚ä¹‹é—´ï¼Œéš¾å…ä¼šæœ‰ä¸€äº›ä¸­é—´å±‚ã€‚ä¸šåŠ¡è¶Šå¤æ‚ï¼Œåˆ’åˆ†çš„å±‚çº§è¶Šå¤šï¼ŒåŒå±‚ä¹‹é—´è¿˜å¯èƒ½å­˜åœ¨ç›¸äº’ä¾èµ–ã€‚ç»“æœå°±æ˜¯å‡½æ•°è°ƒç”¨æ ˆå˜æ·±ã€‚è¿™é‡Œä¼šå‡ºç°ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol type="1">
<li>åˆ°è¾¾åŒä¸€ä¸ªåº•å±‚æ–¹æ³•çš„è·¯å¾„å¯èƒ½æœ‰å¤šä¸ªï¼Œå…‰çœ‹åº•å±‚é”™è¯¯ä¿¡æ¯æ— æ³•å›æº¯é—®é¢˜è§¦å‘è¿‡ç¨‹</li>
<li>ä¸åŒå±‚å…³å¿ƒçš„å†…å®¹ä¸åŒï¼Œæ‹¥æœ‰çš„ä¿¡æ¯ä¹Ÿä¸åŒï¼Œå…‰çœ‹åº•å±‚é”™è¯¯ä¿¡æ¯æ— æ³•æ‹¿åˆ°å®Œæ•´ä¿¡æ¯</li>
</ol>
<p>å› æ­¤éœ€è¦åœ¨ä¸­é—´å±‚å¡«å……å¿…è¦çš„ä¿¡æ¯ï¼Œæ¯”å¦‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dus *DefaultUserService)</span> <span class="title">GetUser</span><span class="params">(ctx context.Context, id <span class="keyword">int64</span>)</span> <span class="params">(*User, error)</span></span> &#123;</span><br><span class="line">	user, err := dus.user.GetUser(ctx, id)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">&quot;UserService gets user %d: %w&quot;</span>, id, err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> user, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ—¢æ˜ç¡®äº†å½“å‰å‡½æ•°ä¸º <code>UserService.GetUser</code>ï¼Œä¹Ÿè¡¥å……äº†æŸ¥è¯¢çš„ç›®æ ‡ç”¨æˆ· <code>id</code>ã€‚</p>
<h2 id="ä¸Šå±‚ç»Ÿä¸€åˆ¤æ–­">ä¸Šå±‚ç»Ÿä¸€åˆ¤æ–­</h2>
<p>å½“è¿™äº›é”™è¯¯æ¥åˆ°ä¸Šå±‚åï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸€ä¸ªå·¥å…·å‡½æ•°æˆ– HTTP/gRPC middleware æ¥ç»Ÿä¸€å†³å®šï¼š</p>
<ul>
<li>è¿”å›çš„é”™è¯¯ç </li>
<li>è¿”å›çš„é”™è¯¯æ¶ˆæ¯</li>
<li>æ‰“å°çš„æ—¥å¿—</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(rt *Router)</span> <span class="title">handleError</span><span class="params">(w http.ResponseWriter, err error)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> status <span class="keyword">int</span></span><br><span class="line">	<span class="keyword">var</span> message <span class="keyword">string</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">switch</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> errors.Is(err, InvalidArgument):</span><br><span class="line">		<span class="comment">// ...</span></span><br><span class="line">	<span class="keyword">case</span> errors.Is(err, NotFound):</span><br><span class="line">		<span class="comment">// ...</span></span><br><span class="line">	<span class="keyword">case</span> errors.Is(err, Internal):</span><br><span class="line">		<span class="comment">// ...</span></span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		<span class="comment">// ...</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	w.WriteHeader(status)</span><br><span class="line">	w.Write([]<span class="keyword">byte</span>(message))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å°ç»“">å°ç»“</h1>
<ul>
<li>é”™è¯¯çš„æ¶ˆè´¹è€…ï¼šç”¨æˆ·ã€ç¨‹åºã€è¿ç»´</li>
<li>é”™è¯¯å°±æ˜¯å€¼ï¼šé”™è¯¯å¯ä»¥è¢«ç¼–ç¨‹</li>
<li>æ ‡å‡†åº“çš„æ¼”è¿›ï¼šç‚¹ â†’ é“¾è¡¨ â†’ æ ‘</li>
<li>ä¸šåŠ¡æœåŠ¡ä¸­çš„é”™è¯¯å¤„ç†å®æˆ˜ï¼šå®šä¹‰é€šç”¨é”™è¯¯ã€åº•å±‚è½¬æ¢æ ‡è¯†ã€ä¸­é—´å¡«å……ä¿¡æ¯ã€ä¸Šå±‚ç»Ÿä¸€åˆ¤æ–­</li>
</ul>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://middlemost.com/failure-is-your-domain/">MiddleMost: Failure is your Domain</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.golang.org/error-handling-and-go">The Go Blog: Error handling and Go</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.golang.org/errors-are-values">The Go Blog: Errors are values</a></li>
<li><a target="_blank" rel="noopener" href="https://www.joelonsoftware.com/2003/10/13/13/">Joel on Software: Exceptions</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.golang.org/go1.13-errors">Working with Errors in Go 1.13</a></li>
<li><a target="_blank" rel="noopener" href="https://lukas.zapletalovi.com/posts/2022/wrapping-multiple-errors/">New in Go 1.20: wrapping multiple errors</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="followme">
  <span>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¶å®ƒå‘å¸ƒæ¸ é“</span>

  <div class="social-list">

      <div class="social-item">
        <a target="_blank" class="social-link" href="/blog/atom.xml">
          <span class="icon">
            <i class="fa fa-rss"></i>
          </span>

          <span class="label">RSS</span>
        </a>
      </div>
  </div>
</div>


        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/blog/2020/09/20/apache-arrow-summary/" rel="prev" title="TiDB ä¸ºä»€ä¹ˆè¦ç”¨ Apache Arrow - ä¸€ä¸ªé—¨å¤–æ±‰çš„æ€è€ƒ">
                  <i class="fa fa-chevron-left"></i> TiDB ä¸ºä»€ä¹ˆè¦ç”¨ Apache Arrow - ä¸€ä¸ªé—¨å¤–æ±‰çš„æ€è€ƒ
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/blog/2020/11/29/so-you-want-to-trace-your-distributed-system-key-design-insights-from-years-of-practical-experience/" rel="next" title="So, you want to trace your distributed system? Key design insights from years of practical experience (2014)">
                  So, you want to trace your distributed system? Key design insights from years of practical experience (2014) <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhengHe</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/blog/js/comments.js"></script><script src="/blog/js/utils.js"></script><script src="/blog/js/schemes/muse.js"></script><script src="/blog/js/next-boot.js"></script>

  





  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/blog/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"zhenghe-hexo-blog","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/blog/js/third-party/comments/disqus.js"></script>

</body>
</html>
